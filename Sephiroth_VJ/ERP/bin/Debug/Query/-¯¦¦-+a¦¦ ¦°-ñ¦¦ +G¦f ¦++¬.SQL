SELECT A.OUT_YMD, A.OUT_PROCESS, 
       PKG_SBC_COMMON.FN_GET_COMMON(A.FACTORY, 'SBO02', A.OUT_DIVISION) AS OUT_REASON, 
       ROUND(SUM(NVL(B.DIR_QTY, 0)), 0) AS DIR_QTY, 
       ROUND(SUM(NVL(B.OUT_QTY, 0)), 0) AS OUT_QTY
  FROM SBO_OUT_HEAD A, SBO_OUT_TAIL B, SBC_ITEM C
 WHERE A.FACTORY     = B.FACTORY
   AND A.OUT_NO      = B.OUT_NO
   AND B.ITEM_CD     = C.ITEM_CD 
   AND A.FACTORY     =  [1;공장;C;SBC21]
   AND A.OUT_YMD     BETWEEN [2;출고일 FROM;D] AND [3;출고일 TO;D] 
   AND C.GROUP_CD    LIKE '01G%'
   AND A.OUT_PROCESS LIKE UPPER(TRIM([4;공정 TO;T])) || '%'
 GROUP BY A.FACTORY, A.OUT_YMD, A.OUT_PROCESS, A.OUT_DIVISION