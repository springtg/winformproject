SELECT OUT_YMD, OUT_PROCESS, DIR_QTY, 
       NORMAL, DEFECTIVE, GTM, ID_ORDER, CP_ORDER, CDC, PRECEDENCE,
       OUT_QTY - ( NORMAL + DEFECTIVE + GTM + ID_ORDER + CP_ORDER + CDC + PRECEDENCE ) AS OTHER
  FROM (
        SELECT A.OUT_YMD, A.OUT_PROCESS,  
               ROUND(SUM(NVL(B.DIR_QTY, 0)), 0) AS DIR_QTY,
               SUM(DECODE(A.OUT_DIVISION, '1',  B.OUT_QTY, 0 )) AS NORMAL,
               SUM(DECODE(A.OUT_DIVISION, '2',  B.OUT_QTY, 0 )) AS DEFECTIVE,
               SUM(DECODE(A.OUT_DIVISION, '18', B.OUT_QTY, 0 )) AS GTM,
               SUM(DECODE(A.OUT_DIVISION, '19', B.OUT_QTY, 0 )) AS ID_ORDER,
               SUM(DECODE(A.OUT_DIVISION, '20', B.OUT_QTY, 0 )) AS CP_ORDER,
               SUM(DECODE(A.OUT_DIVISION, '22', B.OUT_QTY, 0 )) AS CDC,
               SUM(DECODE(A.OUT_DIVISION, '23', B.OUT_QTY, 0 )) AS PRECEDENCE, 
               ROUND(SUM(NVL(B.OUT_QTY, 0)), 0) AS OUT_QTY
          FROM SBO_OUT_HEAD A, SBO_OUT_TAIL B, SBC_ITEM C
         WHERE A.FACTORY     = B.FACTORY
           AND A.OUT_NO      = B.OUT_NO
           AND B.ITEM_CD     = C.ITEM_CD 
           AND A.FACTORY     = [1;공장;C;SBC21]
           AND A.OUT_YMD     BETWEEN [2;출고일 FROM;D] AND [3;출고일 TO;D] 
           AND C.GROUP_CD    LIKE '01G%'
           AND A.OUT_PROCESS LIKE UPPER(TRIM([4;공정 TO;T])) || '%'
         GROUP BY A.FACTORY, A.OUT_YMD, A.OUT_PROCESS
       )
 ORDER BY OUT_YMD, OUT_PROCESS
 