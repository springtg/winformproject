SELECT A.FACTORY, 
       B.OBS_ID, B.OBS_TYPE,
       PKG_SBC_COMMON.FN_GET_COMMON(A.FACTORY, 'SBP11', A.PUR_DIV)      AS REASON,  
       B.CUST_CD AS VENDOR_CODE, 
       PKG_SBC_COMMON.FN_GET_CUSTOMER('DS', B.CUST_CD) AS VENDOR_NAME,
       B.STYLE_CD,
       PKG_SBC_COMMON.FN_GET_STYLE_NAME(B.STYLE_CD)    AS STYLE_NAME,
       PKG_SBC_COMMON.FN_GET_ITEM_NAME(B.ITEM_CD)      AS ITEM_NAME,
       PKG_SBC_COMMON.FN_GET_spec_NAME(B.SPEC_CD)      AS SPEC_NAME,
       PKG_SBC_COMMON.FN_GET_color_NAME(B.COLOR_CD)    AS COLOR_NAME,
       B.PUR_QTY,
       PKG_SBC_COMMON.FN_GET_STOCK_UNIT(B.ITEM_CD)     AS UNIT_NAME,
       B.PUR_PRICE,
       B.PUR_CURRENCY,
       B.CBD_PRICE,
       B.CBD_CURRENCY,
       A.PUR_USER,
       A.PUR_NO
  FROM SBP_PURCHASE_HEAD A, SBP_PURCHASE_TAIL B
 WHERE A.FACTORY  = B.FACTORY
   AND A.PUR_NO   = B.PUR_NO
   AND A.FACTORY  = [1;공장;C;SBC21]
   AND A.PUR_YMD  BETWEEN [2;발주일 From;D] AND [3;발주일 To;D]
   AND B.CUST_CD  LIKE TRIM([4;거래처코드;T]) || '%'
   AND A.PUR_USER LIKE TRIM([5;등록자;U])     || '%'
   AND PUR_DIV    LIKE [6;사유;C;SBP11]       || '%'
 ORDER BY A.FACTORY, B.CUST_CD, B.STYLE_CD, ITEM_NAME, SPEC_NAME, COLOR_NAME
