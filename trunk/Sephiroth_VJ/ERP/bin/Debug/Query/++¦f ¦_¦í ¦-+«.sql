SELECT B.REMARKS, 
       B.STYLE_CD,
       PKG_SBC_COMMON.FN_GET_STYLE_NAME(B.STYLE_CD) AS STYLE_NAME,
       PKG_SBC_COMMON.FN_GET_ITEM_NAME(B.ITEM_CD)   AS ITEM_NAME,
       PKG_SBC_COMMON.FN_GET_SPEC_NAME(B.SPEC_CD)   AS SPEC_NAME,
       PKG_SBC_COMMON.FN_GET_COLOR_NAME(B.COLOR_CD) AS COLOR_NAME,
       PKG_SBC_COMMON.FN_GET_STOCK_UNIT(B.ITEM_CD)  AS ITEM_UNIT, 
	   A.IN_YMD, B.IN_QTY,
       B.PUR_CURRENCY, B.PUR_PRICE, 
       TO_NUMBER(PKG_SBI_IN_TAIL.FN_GET_BEFOR_IN  (B.FACTORY, '', STYLE_CD, ITEM_CD, SPEC_CD, COLOR_CD, SUBSTR(A.IN_YMD, 1, 6), '1' ) ) AS OLD_PRICE,
       PKG_SBI_IN_TAIL.FN_GET_BEFOR_IN  (B.FACTORY, '', STYLE_CD, ITEM_CD, SPEC_CD, COLOR_CD, SUBSTR(A.IN_YMD, 1, 6), '2' ) AS OLD_IN_NO,
       DECODE(B.PUR_PRICE, TO_NUMBER(PKG_SBI_IN_TAIL.FN_GET_BEFOR_IN  (B.FACTORY, '', STYLE_CD, ITEM_CD, SPEC_CD, COLOR_CD, SUBSTR(A.IN_YMD, 1, 6), '1' ) ), 'O', 'X') AS PRICE_CHECK,
       B.CUST_CD,
       PKG_SBC_COMMON.FN_GET_CUSTOMER('DS', CUST_CD)  AS CUST_NAME,
       B.ITEM_CD, B.SPEC_CD, B.COLOR_CD
  FROM SBI_IN_HEAD A, SBI_IN_TAIL B
 WHERE A.FACTORY  = B.FACTORY
   AND A.IN_NO    = B.IN_NO
   AND A.FACTORY  = [1;공장;C;SBC21]
   AND A.IN_YMD   BETWEEN [2;입고일 From;D] AND [3;입고일 To;D]
   AND B.CUST_CD  LIKE TRIM([4;거래처코드;T]) || '%'
   AND B.PUR_USER LIKE TRIM([5;등록자;U])     || '%'
    