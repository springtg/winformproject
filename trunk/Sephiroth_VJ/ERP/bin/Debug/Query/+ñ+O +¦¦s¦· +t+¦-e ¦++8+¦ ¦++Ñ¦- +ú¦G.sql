SELECT FACTORY, STYLE_CD,
       PKG_SBC_COMMON.FN_GET_STYLE_NAME(STYLE_CD) AS STYLE_NAME,
       PKG_SBM_READY.FN_GET_YIELD_STATUS (FACTORY, STYLE_CD) AS YIELD_STATUS,
       FN_SBC_COMPONENT_NAME(COMPONENT_CD) AS COMPONENT_NAME, 
       ( SELECT C.GROUP_NAME
           FROM SBC_ITEM_GROUP C
          WHERE C.GROUP_TYPE || C.GROUP_L = ( SELECT MAX(SUBSTR(D.GROUP_CD, 1, 3))
                                                FROM SBC_ITEM D
                                               WHERE D.ITEM_CD = B.ITEM_CD ) 
            AND C.GROUP_M = '00'
            AND C.GROUP_S = '000' )   AS GROUP_NAME,	   
       PKG_SBC_COMMON.FN_GET_ITEM_NAME(ITEM_CD) AS ITEM_NAME, 
       PKG_SBC_COMMON.FN_GET_COLOR_NAME(COLOR_CD) AS COLOR_NAME,
       PKG_SBC_COMMON.FN_GET_STOCK_UNIT(ITEM_CD) AS ITEM_UNIT, 
       PKG_SBC_COMMON.FN_GET_SPEC_NAME(SPEC_CD) AS SPEC_NAME,
       CS_SIZE_FROM || '-'  || CS_SIZE_TO AS YIELD_SPEC,
       DECODE(PKG_SBC_COMMON.FN_GET_SPEC_NAME(SPEC_CD), CS_SIZE_FROM || '-'  || CS_SIZE_TO, 'O', 'X') AS SPEC_CHECK  
  FROM SBC_YIELD_VALUE B
 WHERE FACTORY  = [1;공장;C;SBC21]
   AND STYLE_CD LIKE TRIM([2;스타일;T]) || '%'
   AND ITEM_CD  IN ( SELECT ITEM_CD
                       FROM SBC_ITEM
					  WHERE SIZE_YN = 'Y' )
   AND SPEC_CD LIKE '1%'
 ORDER BY FACTORY, STYLE_CD, COMPONENT_NAME, ITEM_NAME, SPEC_NAME
 
  